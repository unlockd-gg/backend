{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/generic-response-dialog/generic-response-dialog.component.ts","./src/app/generic-response-dialog/generic-response-dialog.component.html","./src/app/lightning.service.ts","./src/app/login-dialog/login-dialog.component.ts","./src/app/login-dialog/login-dialog.component.html","./src/app/profile/profile.component.ts","./src/app/profile/profile.component.html","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { ProfileComponent } from './profile/profile.component'\n\nconst routes: Routes = [\n  { path: 'profile', component: ProfileComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\nimport { Router, ActivatedRoute} from '@angular/router';\n\nimport { AuthChallenge } from './authchallenge';\n\nimport { LightningService } from '../app/lightning.service';\nimport { LoginDialogComponent } from '../app/login-dialog/login-dialog.component'\n\nimport {MatDialog, MAT_DIALOG_DATA, MatDialogModule} from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'unlockd-webclient';\n  qrcodesrc = '';\n  loginComplete = false;\n  loginButtonVisible = false;\n  logoutButtonVisible = false;\n  public userTitle = \"Lightning User\";\n  authchall: AuthChallenge | undefined;\n  public user = this.lightningService.user;\n\n  constructor(public lightningService: LightningService, private dialog: MatDialog, private router: Router) { }\n\n  ngOnInit(): void {\n    if (localStorage.getItem(\"token\") === null) {\n      this.loginButtonVisible = true;\n      this.logoutButtonVisible = false;\n    }\n    else\n    {\n      this.loginButtonVisible = false;\n      this.logoutButtonVisible = true;\n    }\n\n    if (localStorage.getItem(\"usertitle\") === null) {\n      console.log('usertitle not found in localstorage');\n    }\n    else \n    {\n      this.userTitle = localStorage.getItem(\"usertitle\") || \"\";\n    }\n\n    if (localStorage.getItem(\"role\") === null) {\n      console.log('role not found in localstorage');\n    }\n    else \n    {\n      var role_str = localStorage.getItem(\"role\") || \"\";\n      console.log('roleObject: ', JSON.parse(role_str));\n      //this.role = JSON.parse(role_str);\n    }\n\n    // Subscribe to the login user in lightning service to know if we need to run auth again\n    this.lightningService.login_user.subscribe( (value) => {\n      console.log('lightning service requesting re-authentication');\n      // Only do this if there is an old token in localstorage\n      if (localStorage.getItem('token'))\n      {\n        console.log('found an old token');\n        this.loginChallenge();\n      }\n    });\n\n    // subscribe to the user in lightning service for changes \n    this.lightningService.sub_user.subscribe( (value) => {\n      console.log('lightning service user changed');\n      console.log(this.lightningService.user);\n      //console.log(this.lightningService.role);\n      this.user = this.lightningService.user;\n      this.userTitle = this.lightningService.user.title;\n      //this.role = this.lightningService.role;\n      //console.log(this.role.view_admin_interface.valueOf());\n    });\n    // subscribe to UI changes\n    this.lightningService.showCloseDialog.subscribe( (value) => {\n      console.log('show close dialog');\n      this.closeDialog();\n      this.loginButtonVisible = false;\n      this.logoutButtonVisible = true;\n    });\n\n    this.dialog.afterAllClosed.subscribe(data=>{\n      console.log(\"data returned from mat-dialog-close is \",data);\n      this.lightningService.signinActive = false;\n  })\n\n  }\n\n  loginChallenge() {\n    console.log('App Component Login pressed');\n\n    this.lightningService.loginChallenge()\n    .subscribe(authchall => {\n      this.authchall = authchall;\n      this.qrcodesrc = 'http://54.219.218.253/generate_qr/' + authchall.lnurl;\n\n      // open the login dialog\n      this.dialog.open(LoginDialogComponent, {\n        data: {\n          lnurl: this.authchall,\n          qrcodesrc: this.qrcodesrc\n        },\n      });\n    });\n  }\n\n  \n\n  closeDialog () {\n    this.dialog.closeAll();\n  }\n\n  logout () {\n    this.lightningService.doLogout();\n    this.loginButtonVisible = true;\n    this.logoutButtonVisible = false;\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    //localStorage.removeItem('role');\n    this.router.navigate(['']);\n  }\n\n\n\n}\n","<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->\n<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->\n<!-- * * * * * * * * * * and can be replaced. * * * * * * * * * * * -->\n<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n<!-- * * * * * * * * * Delete the template below * * * * * * * * * * -->\n<!-- * * * * * * * to get started with your project! * * * * * * * * -->\n<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n\n<style>\n  :host {\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin: 8px 0;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  .spacer {\n    flex: 1;\n  }\n\n  .toolbar {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar img {\n    margin: 0 16px;\n  }\n\n  .toolbar #twitter-logo {\n    height: 40px;\n    margin: 0 8px;\n  }\n\n  .toolbar #youtube-logo {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar #twitter-logo:hover,\n  .toolbar #youtube-logo:hover {\n    opacity: 0.8;\n  }\n\n  .content {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card svg.material-icons path {\n    fill: #888;\n  }\n\n  .card-container {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card {\n    all: unset;\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container .card:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container .card:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container .card:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container .card:not(.highlight-card):hover .material-icons path {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card span {\n    margin-left: 60px;\n  }\n\n  svg#rocket {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a,\n  a:visited,\n  a:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a:hover {\n    color: #125699;\n  }\n\n  .terminal {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n  .terminal::before {\n    content: \"\\2022 \\2022 \\2022\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal pre {\n    font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer a {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27,31,35,.2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg,#fafbfc,#eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n  }\n\n  .github-star-badge:hover {\n    background-image: linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);\n    border-color: rgba(27,31,35,.35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge .material-icons {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n  svg#clouds {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n  /* Responsive Styles */\n  @media screen and (max-width: 767px) {\n    .card-container > *:not(.circle-link) ,\n    .terminal {\n      width: 100%;\n    }\n\n    .card:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card span {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke {\n      display: none;\n      visibility: hidden;\n    }\n  }\n</style>\n\n<!-- Toolbar -->\n<div class=\"toolbar\" role=\"banner\">\n\n\n  <button mat-button routerLink=\"/\">unlockd</button>\n  <button mat-button routerLink=\"/pages/news\">SOCIAL</button>\n  <button mat-button routerLink=\"/pages/about\">INFO</button>\n\n  <div class=\"spacer\"></div>\n\n      <span *ngIf=\"logoutButtonVisible\">Welcome, <span> {{ userTitle }} </span> </span>\n\n      <span *ngIf=\"logoutButtonVisible\">\n        <span >\n          <button mat-icon-button [matMenuTriggerFor]=\"adminmenu\" aria-label=\"Example icon-button with a menu\">\n            <mat-icon>admin_panel_settings</mat-icon>\n          </button>\n          <mat-menu #adminmenu=\"matMenu\">\n            <button  mat-menu-item routerLink=\"admin-courses\">\n              <mat-icon>cast for education</mat-icon>\n              <span>Games</span>\n            </button>\n            <button  mat-menu-item routerLink=\"admin-users\">\n              <mat-icon>group</mat-icon>\n              <span>Users</span>\n            </button>\n            <button  mat-menu-item routerLink=\"admin-roles\">\n              <mat-icon>event_list</mat-icon>\n              <span>Blog</span>\n            </button>\n          </mat-menu>\n        </span>\n  \n        \n  \n        <button mat-icon-button [matMenuTriggerFor]=\"menu\" aria-label=\"Example icon-button with a menu\">\n          <mat-icon>more_vert</mat-icon>\n        </button>\n        <mat-menu #menu=\"matMenu\">\n          <button mat-menu-item routerLink=\"profile\">\n            <mat-icon>person</mat-icon>\n            <span>profile</span>\n          </button>\n          <button mat-menu-item routerLink=\"transactions\">\n            <mat-icon>list</mat-icon>\n            <span>transactions</span>\n          </button>\n          <button mat-menu-item routerLink=\"badges\">\n            <mat-icon>checklist</mat-icon>\n            <span>badges</span>\n          </button>\n          <button mat-menu-item routerLink=\"badges\">\n            <mat-icon></mat-icon>\n            <span>redeem voucher</span>\n          </button>\n          <button mat-menu-item *ngIf=\"logoutButtonVisible\" (click)=\"logout()\">\n            <mat-icon>logout</mat-icon>\n            <span>logout</span>\n          </button>\n        </mat-menu>\n        </span>\n\n    <button mat-raised-button *ngIf=\"loginButtonVisible\" (click)=\"loginChallenge()\">Login</button>\n  \n</div>\n\n<div class=\"content\" role=\"main\">\n\n  <div id=\"container\">\n\t\t<div id=\"recent\">\n\t\t\t<div class=\"tag\">Now</div>\n\t\t\t<div class=\"fourcolcontent post\">\n\t\t\t\t<h3><a href=\"#\">gaming unlockd</a></h3>\n\nOpen source, decentralized, bitcoin powered tools for modern multiplayer and competitive games.<br>\nRun your own multiplayer game backend, and customize it however you want.\n\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside\" id=\"comments\">\n\t\t\t\t<h5><a href=\"#\">21</a></h5>\n\t\t\t</div>\n\t\t\t<div class=\"clear\"></div>\n\t\t</div>\n\n\t\t<div class=\"divider\"></div>\n\n\t\t<div id=\"older\">\n\t\t\t<div class=\"tag\">Mission</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Bitcoin Only</h3>\n        We are exclusively focused on bitcoin.  No site token, no shi*coins.  BTC and lightning ftw.\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Support developers</h3>\n\t\t\t\tIndie and small studios need backend game solutions.  Providing complete open source access allows devs and studios to run a customized backend.\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Promote decentralization</h3>\n        Multiplayer games still require high performance, realtime, dedicated servers.  Especially in the case of competitive games, or games with an economy, these servers need to be under control of the game developer.\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Encourage self custody</h3>\n\t\t\t\tWe remind users to withdraw sats from the site at the end of a gaming session.  We will provide help and instructions on how to do this.  Lightning makes deposit and withdraw quick and easy.\n\t\t\t</div>\n\t\t\t<div class=\"clear\"></div>\n\t\t</div>\n\n\n    <div class=\"divider\"></div>\n\n\t\t<div id=\"older\">\n\t\t\t<div class=\"tag\">TASKS</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Convert backend to python 3 runtime</h3>\n        Python 2.7 is no longer supported, and we need to convert.\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Convert metagame to python 3 runtime</h3>\n\t\t\t\tPython 2.7 is no longer supported, and we need to convert.\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Convert examplegame to use pub/priv key auth</h3>\n        Remove firebase auth and replace with lnurl login.\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Integrate lightning deposit/withdraw</h3>\n\t\t\t\tRemove braintree payments, and replace with lightning.\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Remove uetopia references throughout</h3>\n        uetopia is mentioned throughout the codebase, and we need to replace it.\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Sunsetting uetopia</h3>\n\t\t\t\tThe uetopia website and legacy functionality will be retained until January 2024.  Users and games should run a backend instance or find an alternative before this time.\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside post\">\n\t\t\t\t<h3>Community Discord</h3>\n\t\t\t\t<a href=\"https://discord.gg/QXQkq4dhdx\">Discord Server</a> up and running.  Stop by and chat about games.\n\t\t\t</div>\n\n\t\t\t<div class=\"clear\"></div>\n\t\t</div>\n\n\n\t\t<div class=\"divider\"></div>\n\t\t<div id=\"navigate\">\n\t\t\t<div class=\"tag\">Navigate</div>\n\t\t\t<div class=\"fourcolside\">\n\t\t\t\t<h3>Repositories</h3>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><a href=\"https://github.com/unlockd-gg/ExampleGame\">Example Game</a></li>\n\t\t\t\t\t<li><a href=\"https://github.com/unlockd-gg/online-subsystem\">Unreal Engine Plugin</a></li>\n\t\t\t\t\t<li><a href=\"https://github.com/unlockd-gg/metagame\">Metagame</a></li>\n\t\t\t\t\t<li><a href=\"https://github.com/unlockd-gg/backend\">Backend</a></li>\n\t\t\t\t\t<li><a href=\"https://github.com/unlockd-gg/UnrealEngine\">Unreal Engine</a></li>\n\t\t\t\t\t<li><a href=\"https://github.com/unlockd-gg/socketIO-server\">SocketIO Server</a></li>\n          <li><a href=\"https://github.com/unlockd-gg/launcher\">Launcher</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside\">\n\t\t\t\t<h3>Social</h3>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><a href=\"https://discord.gg/QXQkq4dhdx\">Discord</a></li>\n\t\t\t\t\t<li><a href=\"#\">Twitter</a></li>\n\t\t\t\t\t<li><a href=\"#\">Blog</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside\">\n\t\t\t\t<h3>Support</h3>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><a href=\"/img/btc_donations.png\">bitcoin donations</a></li>\n\t\t\t\t\t<li><a href=\"https://getalby.com/element.png\">lightning donations</a></li>\n\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"fourcolside\">\n\t\t\t\t<h3>uetopia/legacy</h3>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><a href=\"https://uetopia.com\">Backend</a></li>\n\t\t\t\t\t<li><a href=\"https://github.com/uetopia/\">Repositories</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"clear\"></div>\n\t\t</div>\n\t\t<div class=\"clear\"></div>\n\t\t<div class=\"divider\"></div>\n\t\t<div class=\"fourcolside\">&nbsp;</div><div class=\"fourcolside\">&nbsp;</div><div class=\"fourcolside\">&nbsp;</div><div class=\"fourcolsidesmall\">This page designed and coded by <a href=\"http://www.gregponchak.com\">Greg Ponchak</a>.</div>\n\t</div>\n\n\n</div>\n\n\n<router-outlet></router-outlet>\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {MatInputModule} from '@angular/material/input';\nimport {MatSelectModule} from '@angular/material/select';\nimport {MatFormFieldModule} from '@angular/material/form-field';\n\n\nimport {MatDialogModule} from '@angular/material/dialog';\nimport {MatButtonModule} from '@angular/material/button';\nimport {MatIconModule} from '@angular/material/icon';\nimport {MatMenuModule} from '@angular/material/menu';\nimport {MatDatepickerModule} from '@angular/material/datepicker';\nimport {MatNativeDateModule} from '@angular/material/core';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport {MatListModule} from '@angular/material/list';\nimport {MatGridListModule} from '@angular/material/grid-list';\nimport { LoginDialogComponent } from './login-dialog/login-dialog.component';\nimport { ProfileComponent } from './profile/profile.component';\nimport { GenericResponseDialogComponent } from './generic-response-dialog/generic-response-dialog.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ProfileComponent,\n    GenericResponseDialogComponent,\n    //LoginDialogComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    BrowserAnimationsModule,\n    MatDialogModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatNativeDateModule,\n    MatDatepickerModule,\n    MatCheckboxModule,\n    MatListModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatFormFieldModule, MatSelectModule, MatInputModule, MatGridListModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-generic-response-dialog',\n  templateUrl: './generic-response-dialog.component.html',\n  styleUrls: ['./generic-response-dialog.component.css']\n})\nexport class GenericResponseDialogComponent {\n  constructor(\n    public dialogRef: MatDialogRef<GenericResponseDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: any) { }\n  \n  onCancel(): void {\n    this.dialogRef.close();\n  }\n}\n","<h1 mat-dialog-title>{{ data.response_title }}</h1>\n<div mat-dialog-content>\n\n    {{ data.response_message }}\n\n    <div mat-dialog-actions>\n        <button mat-button (click)=\"onCancel()\">OK</button>\n    </div>\n</div>","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\nimport { Observable, of, Subject } from 'rxjs';\nimport { catchError, map, tap, delay } from 'rxjs/operators';\n\n//import { requestProvider } from \"webln\";\n\nimport { User } from './user';\n//import { Role } from './role';\nimport { AuthChallenge } from './authchallenge';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LightningService {\n\n  // TODO:  Fix this so it's not hardcoded to our local dev environment\n  public apiUrl = 'http://54.219.218.253//api';  // URL to web api - in quotes - no trailing slash:  'http://54.176.48.9'\n  public authChallengeResponse = '';\n  public weblnButtonUrl = '';\n  public emailaddress = '';\n  public auth_token = '';\n  public signinActive = false;\n  signinEmailValidation = false;\n  showEmailPopUp: Subject<boolean> = new Subject<boolean>();\n  showEmailValidationPopUp: Subject<boolean> = new Subject<boolean>();\n  signInComplete = false;\n  showCloseDialog: Subject<boolean> = new Subject<boolean>();\n\n  // keep track of fake pubkey in the case of a non-lighting login\n  fake_pub_key = \"\";\n\n  user: User = {\n    id: 0,\n    title: 'Service Test User',\n    emailvalidated: false,\n    admin: false\n  };\n\n\n\n  sub_user: Subject<boolean> = new Subject<boolean>();\n  login_user: Subject<boolean> = new Subject<boolean>();\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  /** GET login challenge from the server */\n  // this is just a lnurl string\n  loginChallenge():  Observable<AuthChallenge> {\n    console.log('Lightning Service Login Challenge');\n    const auth_url = `${this.apiUrl}/auth`;\n    return this.http.get<AuthChallenge>(auth_url)\n    .pipe(\n      tap( // Log the result or error\n      {\n        //next: (data) => this.log(data['lnurl']), // this works\n        //next: (data) => this.authChallengeResponse = data['lnurl'], // this too\n        next: (data) => this.registerACR( data['lnurl'] ),\n        error: (error) => this.log('error')\n      }\n      )\n    );\n  }\n\n  registerACR(aCR: string) {\n    console.log('register ACR');\n    console.log(aCR);\n    this.authChallengeResponse = aCR;\n    this.signinActive = true;\n    this.startPolling();\n  }\n\n  getLnUrl() {\n    console.log('Lightning Service Get lnUrl');\n    return this.authChallengeResponse;\n  }\n\n  pollSignedIn = async () => {\n    const response = await fetch(this.apiUrl + '/me?bech_32_url=' + this.authChallengeResponse);\n    const result = await response.json();\n    console.log(result);\n    console.log(result.user); \n    if (result.auth_token)\n    {\n      console.log('found auth_token');\n\n      // User can still be none here.  Check first.\n      if (result.user) {\n        console.log('found user');\n        this.user = result.user;\n        this.update_user(result.user['title'], result.user['address']);\n      }\n      \n      this.auth_token = result.auth_token;\n      localStorage.setItem('token', result.auth_token);\n      \n      //localStorage.setItem('user', JSON.stringify(result.user));\n\n      this.signinActive = false;\n\n      if (result.do_email_validation) {\n        console.log('do email validation');\n        this.showEmailPopUp.next(true);\n      } \n      else \n      {\n        console.log('no email validation - close dialog');\n        this.showCloseDialog.next(true);\n        this.getUserData();\n      }\n    }\n    return result.user != null;\n  }\n\n  checkSignedIn = async () => {\n    const result = await this.pollSignedIn();\n    console.log(result);\n\n    if (!result) {\n        this.startPolling();\n    } else {\n        console.log('login success');\n        // window.location.reload();\n        this.signInComplete = true;\n    }\n  }\n\n  startPolling() {\n      if(!this.signinActive)\n      {\n        return;\n      }\n      window.setTimeout( this.checkSignedIn, 1000);\n  }\n\n  async startEmailValidation(emailaddress: string)\n  {\n    console.log('lightning.service startEmailValidation')\n    this.emailaddress = emailaddress;\n    const response = await fetch(this.apiUrl + '/user/email/' + emailaddress + '/start', {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.auth_token}`\n      }\n    });\n    this.showEmailValidationPopUp.next(true);\n    const result = await response.json();\n  }\n\n  async validateEmail(emailaddress: string, verificationcode: string)\n  {\n    console.log('lightning.service startEmailValidation')\n    this.emailaddress = emailaddress;\n    const response = await fetch(this.apiUrl + '/user/email/' + emailaddress + '/validate/' + verificationcode, {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.auth_token}`\n      }\n    });\n    this.showEmailValidationPopUp.next(true);\n    const result = await response.json();\n\n    if (result['success'] == true) {\n      console.log('success true');\n\n      // get user data again.\n      this.getUserData();\n      this.signinActive = false;\n      this.showCloseDialog.next(true);\n\n    }\n  }\n\n  async startEmailValidationNoLightning(emailaddress: string)\n  {\n    console.log('lightning.service startEmailValidation without lightning')\n    this.emailaddress = emailaddress;\n    const response = await fetch(this.apiUrl + '/user/email/' + emailaddress + '/start-no-lightning' );\n    this.showEmailValidationPopUp.next(true);\n    const result = await response.json();\n    this.fake_pub_key = result['publickey'];\n  }\n\n  async validateEmailNoLightning(emailaddress: string, verificationcode: string)\n  {\n    console.log('lightning.service startEmailValidation without lightning')\n    this.emailaddress = emailaddress;\n    const response = await fetch(this.apiUrl + '/user/email/' + emailaddress + '/validate-no-lightning/' + verificationcode + \"/\" + this.fake_pub_key );\n\n    this.showEmailValidationPopUp.next(true);\n    const result = await response.json();\n\n    if (result['success'] == true) {\n      console.log('success true');\n      // save the JWT token here.\n      this.auth_token = result.auth_token;\n      localStorage.setItem('token', result.auth_token);\n\n      this.signinActive = false;\n      this.showCloseDialog.next(true);\n\n    }\n  }\n\n  update_user(title: string, address: string )\n  {\n    console.log('lightning service update user');\n    this.user['title'] = title;\n    this.sub_user.next(true);\n  }\n\n  getUserData = async () => {\n    const response = await fetch(this.apiUrl + '/users/data', {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    });\n    const result = await response.json();\n    console.log(result);\n    console.log(result.user); \n    if (result.user) {\n      console.log('found user');\n      this.user = result.user;\n      this.sub_user.next(true);\n    }\n    else\n    {\n      this.login_user.next(true);\n    }\n    if (result.role) {\n      console.log('found role');\n      console.log(result.role);\n      //this.role = result.role;\n\n      // add the role to localstorage\n      //localStorage.setItem('role', JSON.stringify(result.role));\n    }\n    return {User: this.user};\n  }\n\n  doLogout() {\n  }\n\n  public requestLogin( ) {\n    this.login_user.next(true);\n  }\n\n\n\n\n  /** Log */\n  private log(message: string) {\n    console.log(message);\n    //this.messageService.add(`HeroService: ${message}`);\n  }\n}\n","import {Component, Inject, Input, NgModule} from '@angular/core';\n//import { BrowserModule } from '@angular/platform-browser';\nimport { CommonModule } from '@angular/common';\nimport { LightningService } from '../lightning.service';\nimport {MatDialog, MAT_DIALOG_DATA, MatDialogModule} from '@angular/material/dialog';\n//import { FormControl } from '@angular/forms';\nimport { FormsModule, ReactiveFormsModule  } from '@angular/forms';\nimport {NgIf} from '@angular/common';\nimport {MatButtonModule} from '@angular/material/button';\n\nimport { LoginDialogData } from '../login-dialog-data';\n\n@Component({\n  selector: 'app-login-dialog',\n  templateUrl: './login-dialog.component.html',\n  standalone: true,\n  imports: [ CommonModule, MatDialogModule, NgIf, MatButtonModule, FormsModule, ReactiveFormsModule],\n})\nexport class LoginDialogComponent {\n  \n  constructor(@Inject(MAT_DIALOG_DATA) public data: LoginDialogData, private lightningService: LightningService) {\n    \n  }\n\n  ngOnInit(): void {\n    // subscribe to the user in lightning service for changes \n    this.lightningService.showEmailPopUp.subscribe( (value) => {\n      console.log('show email popup');\n      this.signinEmailValidationStart = true;\n      this.signinLightning = false;\n    });\n    // subscribe to the user in lightning service for changes\n    this.lightningService.showEmailValidationPopUp.subscribe( (value) => {\n      console.log('show Email Validation popup');\n      this.signinEmailValidationCodeStart = true;\n      this.signinEmailValidationStart = false;\n    });\n\n\n\n    \n }\n  //qrcodesrc = this.lightningService.getLnUrl();\n  qrcodesrc = 'http://54.219.218.253/api/generate_qr/' + this.lightningService.getLnUrl();\n  weblnurl = 'lightning:' + this.lightningService.getLnUrl();\n\n  // Multi-stage dialog\n  // Stage1 = lightninglogin\n  signinLightning = true;\n\n  loginmodebrowser = true;\n  loginmodeQR = false;\n  loginmodeEmail = false;\n\n\n  // Stage 2 - email address entry\n  signinEmailValidationStart = false;\n  signinEmailValidation = false;\n  emailaddress = '';\n  // Stage 3 - Email validation\n  signinEmailValidationCodeStart = false;\n  emailaddressverificationcode = '';\n\n  changeLoginMode(loginMode: string) {\n    if (loginMode == \"browser\") {\n      this.loginmodebrowser = true;\n      this.loginmodeQR = false;\n      this.loginmodeEmail = false;\n    } else if (loginMode == \"qrcode\")  {\n      this.loginmodebrowser = false;\n      this.loginmodeQR = true;\n      this.loginmodeEmail = false;\n    } else {\n      this.loginmodebrowser = false;\n      this.loginmodeQR = false;\n      this.loginmodeEmail = true;\n    }\n  }\n\n  submitEmail() {\n    console.log(this.emailaddress);\n    this.lightningService.startEmailValidation(this.emailaddress);\n  }\n\n  validateEmail() {\n    console.log(this.emailaddress);\n    console.log(this.emailaddressverificationcode)\n    this.lightningService.validateEmail(this.emailaddress, this.emailaddressverificationcode);\n  }\n\n  submitEmailNoLightning() {\n    console.log(this.emailaddress);\n    this.lightningService.startEmailValidationNoLightning(this.emailaddress);\n\n    // Turn off the mode selection buttons\n    this.signinLightning = false;\n  }\n  validateEmailNoLightning() {\n    console.log(this.emailaddress);\n    console.log(this.emailaddressverificationcode)\n    this.lightningService.validateEmailNoLightning(this.emailaddress, this.emailaddressverificationcode);\n  }\n\n}\n","<h1 mat-dialog-title>Login to unlockd</h1>\n<div *ngIf=\"signinLightning\" mat-dialog-content>\n    <div *ngIf=\"loginmodebrowser\">\n        <p><a [attr.href]=\"weblnurl\" class=\"webln-button d-none btn btn-primary mx-auto\" >Connect to browser</a></p>\n        <p>If the link above does not work for you, please install the <a href=\"https://getalby.com\">getalby web extension.</a></p>\n        <p>Or, scan a QR code using <a href=\"https://coincharge.io/en/lnurl-for-lightning-wallets/\">your favorite lightning wallet</a> that supports lnurl-auth </p>\n        \n    </div> \n    <div *ngIf=\"loginmodeQR\">Login with a QR code.\n    <p> Scan this QR code with <a href=\"https://coincharge.io/en/lnurl-for-lightning-wallets/\">your favorite lightning wallet</a> that supports lnurl-auth</p>. \n        <a class=\"qr-link\" href=\"\">\n        <img class=\"qr\" id=\"qr_image\" [src]=qrcodesrc >\n      </a>\n    </div> \n    <div *ngIf=\"loginmodeEmail\">Login with an email address.\n        <p> Enter your email address to recieve a temporary login code</p>. \n        <p> This login functionality is provided as a temporary convenience, and will no longer be available once lnurl-auth is working on iphone/safari.  Please use lightning.</p>\n            \n        Email address: <input type=\"email\"  [(ngModel)]=\"emailaddress\" email>\n        <button mat-raised-button color=\"primary\" (click)=\"submitEmailNoLightning()\">Submit Email</button>\n\n    </div> \n</div>\n<div *ngIf=\"signinEmailValidationStart\" mat-dialog-content>\n    <p>You are logged in with lightning.  </p>\n    <h1 mat-dialog-title>Required: Validate email</h1>\n    <p>We require your email address so we can email you with updates.</p>\n    <p>We will never sell your email address, or give it away to anyone.</p>\n    <p>\n        Email address: <input type=\"email\"  [(ngModel)]=\"emailaddress\" email>\n    </p>\n    <p> {{emailaddress}}</p>\n</div>\n<div *ngIf=\"signinEmailValidationCodeStart\" mat-dialog-content>\n    <p>Please check your email for the 6 digit security code  </p>\n    <h1 mat-dialog-title>Required: Validate email</h1>\n\n    <p>\n    VerificationCode: <input type=\"text\"  [(ngModel)]=\"emailaddressverificationcode\" >\n    </p>\n    <p> {{emailaddressverificationcode}}</p>\n</div>\n\n\n<div *ngIf=\"signinLightning\" mat-dialog-actions>\n    <div class=\"login-button-row\">\n        <button *ngIf=\"!loginmodebrowser\" mat-raised-button color=\"primary\" (click)=\"changeLoginMode('browser')\">Login with browser</button>\n        <button *ngIf=\"!loginmodeQR\" mat-raised-button color=\"accent\" (click)=\"changeLoginMode('qrcode')\">Login with QR code</button>\n        <button *ngIf=\"!loginmodeEmail\" mat-raised-button color=\"accent\" (click)=\"changeLoginMode('email')\">Login with Email</button>\n        <button mat-raised-button color=\"warn\" mat-dialog-close>Close</button>\n    </div>\n</div>\n<div *ngIf=\"signinEmailValidationStart\" mat-dialog-content>\n    <div class=\"login-button-row\">\n        <button mat-raised-button color=\"primary\" (click)=\"submitEmail()\">Submit Email</button>\n        <button mat-raised-button color=\"warn\" mat-dialog-close>Close</button>\n    </div>\n</div>\n<div *ngIf=\"signinEmailValidationCodeStart\" mat-dialog-content>\n    <div class=\"login-button-row\">\n        <button *ngIf=\"!loginmodeEmail\" mat-raised-button color=\"primary\" (click)=\"validateEmail()\">Verify Email</button>\n        <button *ngIf=\"loginmodeEmail\" mat-raised-button color=\"primary\" (click)=\"validateEmailNoLightning()\">Verify Email NL</button>\n        <button mat-raised-button color=\"warn\" mat-dialog-close>Close</button>\n    </div>\n</div>","import { Component } from '@angular/core';\nimport { FormGroup, Validators, FormControl} from '@angular/forms';\n\nimport {MatDialog, MAT_DIALOG_DATA, MatDialogModule} from '@angular/material/dialog';\n\nimport { LightningService } from '../lightning.service';\nimport { User } from '../user';\n\nimport { GenericResponseDialogComponent } from '../generic-response-dialog/generic-response-dialog.component';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.css']\n})\nexport class ProfileComponent {\n\n  constructor(public lightningService: LightningService, public dialog: MatDialog) { }\n\n  profile_user_json = {};\n  public member = false;\n\n  user: User = {\n    id: 0,\n    title: 'Profile User',\n    emailvalidated: false,\n    admin: false\n  };\n\n\n  title = new FormControl('');\n\n  ngOnInit(): void {\n    console.log('profile init');\n    //this.title.setValue(this.lightningService.user['title']);\n    this.getUserData();\n\n  }\n\n  getUserData = async () => {\n    if (localStorage.getItem(\"token\") === null) {\n      console.log('profile - no access token');\n    }\n    else\n    {\n      const response = await fetch(this.lightningService.apiUrl + '/users/data', {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const result = await response.json();\n      console.log(result);\n      console.log(result.user); \n      console.log(result.status); \n      if (result.status == \"401\")\n      {\n        this.lightningService.requestLogin();\n      }\n      if (result.user) {\n        console.log('found user');\n        this.user = result.user;\n        this.title.setValue(result.user['title']);\n\n        //this.admin = result.user['admin'];\n\n      }\n    }\n  }\n\n\n  updateProfile = async () => {\n    console.log('update profile');\n    console.log(localStorage.getItem(\"token\"));\n\n    //const location = window.location.hostname; // this works for live\n    const location = '13.56.127.211' // hardcoding for now\n    const settings = {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        body: JSON.stringify({'title':this.title.value,\n\n      })\n    };\n    //try {\n        const fetchResponse = await fetch(this.lightningService.apiUrl + '/users/profile/update', settings);\n        console.log(fetchResponse);\n        const data = await fetchResponse.json();\n        // TODO - update localstorage with the new profile data\n        //const result = await data.json();\n        console.log(data);\n        //localStorage.setItem('user', JSON.stringify(result.user));\n\n        this.dialog.open(GenericResponseDialogComponent, {\n          data: {\n            response_message: data['response_message'],\n            response_title: data['response_title']\n          },\n        });\n\n        localStorage.setItem('usertitle', this.title.value || \"Lightning User!\");\n\n        // we want to do an update at some point, later.\n        // doing this here, results in overwriting the actual form data\n        this.lightningService.getUserData();\n\n        //this.profile_user_json = result.user;\n        return data;\n    //} catch (e) {\n    //    return e;\n    //} \n\n  }\n\n}\n","\n    <h3 class=\"ng-binding\" ><b>Update My Profile</b></h3>\n\n\n<form #heroForm=\"ngForm\">\n    <mat-form-field class=\"example-full-width\">\n        <mat-label for=\"title\">Name </mat-label>\n        <input matInput id=\"title\" type=\"text\" [formControl]=\"title\">\n    </mat-form-field>\n    \n\n\n</form>\n\n    <button mat-raised-button color=\"primary\" (click)=\"updateProfile()\">Update Profile</button>\n","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\n\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":["RouterModule","ProfileComponent","routes","path","component","AppRoutingModule","forRoot","imports","i1","exports","LoginDialogComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","userTitle","ɵɵlistener","AppComponent_span_9_button_46_Template_button_click_0_listener","ɵɵrestoreView","_r7","ctx_r6","ɵɵnextContext","ɵɵresetView","logout","ɵɵelement","ɵɵtemplate","AppComponent_span_9_button_46_Template","ɵɵproperty","_r3","_r4","ctx_r1","logoutButtonVisible","AppComponent_button_10_Template_button_click_0_listener","_r9","ctx_r8","loginChallenge","AppComponent","constructor","lightningService","dialog","router","title","qrcodesrc","loginComplete","loginButtonVisible","user","ngOnInit","localStorage","getItem","console","log","role_str","JSON","parse","login_user","subscribe","value","sub_user","showCloseDialog","closeDialog","afterAllClosed","data","signinActive","authchall","lnurl","open","closeAll","doLogout","removeItem","navigate","ɵɵdirectiveInject","LightningService","i2","MatDialog","i3","Router","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","AppComponent_span_8_Template","AppComponent_span_9_Template","AppComponent_button_10_Template","BrowserModule","HttpClientModule","BrowserAnimationsModule","FormsModule","ReactiveFormsModule","MatInputModule","MatSelectModule","MatFormFieldModule","MatDialogModule","MatButtonModule","MatIconModule","MatMenuModule","MatDatepickerModule","MatNativeDateModule","MatCheckboxModule","MatListModule","MatGridListModule","GenericResponseDialogComponent","AppModule","bootstrap","declarations","MAT_DIALOG_DATA","dialogRef","onCancel","close","MatDialogRef","GenericResponseDialogComponent_Template","GenericResponseDialogComponent_Template_button_click_5_listener","ɵɵtextInterpolate","response_title","response_message","Subject","tap","http","_this","apiUrl","authChallengeResponse","weblnButtonUrl","emailaddress","auth_token","signinEmailValidation","showEmailPopUp","showEmailValidationPopUp","signInComplete","fake_pub_key","id","emailvalidated","admin","pollSignedIn","_asyncToGenerator","response","fetch","result","json","update_user","setItem","do_email_validation","next","getUserData","checkSignedIn","startPolling","headers","Authorization","role","User","auth_url","get","pipe","registerACR","error","aCR","getLnUrl","window","setTimeout","startEmailValidation","_this2","validateEmail","verificationcode","_this3","startEmailValidationNoLightning","_this4","validateEmailNoLightning","_this5","address","requestLogin","message","ɵɵinject","HttpClient","factory","ɵfac","providedIn","CommonModule","ɵɵattribute","weblnurl","ɵɵsanitizeUrl","ctx_r7","LoginDialogComponent_div_2_div_3_Template_input_ngModelChange_8_listener","$event","_r10","ctx_r9","LoginDialogComponent_div_2_div_3_Template_button_click_9_listener","ctx_r11","submitEmailNoLightning","LoginDialogComponent_div_2_div_1_Template","LoginDialogComponent_div_2_div_2_Template","LoginDialogComponent_div_2_div_3_Template","loginmodebrowser","loginmodeQR","loginmodeEmail","LoginDialogComponent_div_3_Template_input_ngModelChange_11_listener","_r13","ctx_r12","LoginDialogComponent_div_4_Template_input_ngModelChange_7_listener","_r15","ctx_r14","emailaddressverificationcode","ctx_r2","LoginDialogComponent_div_5_button_2_Template_button_click_0_listener","_r20","ctx_r19","changeLoginMode","LoginDialogComponent_div_5_button_3_Template_button_click_0_listener","_r22","ctx_r21","LoginDialogComponent_div_5_button_4_Template_button_click_0_listener","_r24","ctx_r23","LoginDialogComponent_div_5_button_2_Template","LoginDialogComponent_div_5_button_3_Template","LoginDialogComponent_div_5_button_4_Template","ctx_r3","LoginDialogComponent_div_6_Template_button_click_2_listener","_r26","ctx_r25","submitEmail","LoginDialogComponent_div_7_button_2_Template_button_click_0_listener","_r30","ctx_r29","LoginDialogComponent_div_7_button_3_Template_button_click_0_listener","_r32","ctx_r31","LoginDialogComponent_div_7_button_2_Template","LoginDialogComponent_div_7_button_3_Template","ctx_r5","signinLightning","signinEmailValidationStart","signinEmailValidationCodeStart","loginMode","standalone","features","ɵɵStandaloneFeature","LoginDialogComponent_Template","LoginDialogComponent_div_2_Template","LoginDialogComponent_div_3_Template","LoginDialogComponent_div_4_Template","LoginDialogComponent_div_5_Template","LoginDialogComponent_div_6_Template","LoginDialogComponent_div_7_Template","NgIf","MatDialogClose","MatDialogTitle","MatDialogContent","MatDialogActions","i4","MatButton","i5","DefaultValueAccessor","NgControlStatus","EmailValidator","NgModel","encapsulation","FormControl","profile_user_json","member","status","setValue","updateProfile","location","settings","method","Accept","body","stringify","fetchResponse","ProfileComponent_Template","ProfileComponent_Template_button_click_9_listener","__NgCli_bootstrap_1","platformBrowser","bootstrapModule","catch","err"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}