<div ng-show="!loaded_game_server_cluster" class="center"> <md-progress-circular md-mode="indeterminate"></md-progress-circular> </div>

<div ng-show="loaded_game_server_cluster">

  <md-toolbar class="demo-toolbar md-primary md-hue-1 _md _md-toolbar-transitions">
      <div class="md-toolbar-tools">
        <h3 class="ng-binding">Server Cluster Details</h3>
        <span flex></span>
          <md-button class="md-icon-button" ng-click="toggleViewEditForm()">
            <i class="material-icons">edit</i>
          </md-button>
      </div>
    </md-toolbar>
      <md-content layout-padding="" class="layout-padding _md" ng-if="viewEditForm">
        <form name="form" novalidate>
        <md-input-container class="md-block md-input-has-value">
          <label for="input_title">Title</label>
          <input ng-model="servercluster.title" class="ng-pristine ng-untouched ng-valid md-input ng-valid-email" id="input_title" aria-invalid="false"><div class="md-errors-spacer"></div>
        </md-input-container>
        <md-input-container class="md-block">
          <label>Description</label>
          <textarea ng-model="servercluster.description" md-maxlength="150" rows="5" md-select-on-focus></textarea>
        </md-input-container>


                <md-input-container class="md-block">
                  <label for="region">Player Travel Mode:</label>
                  <md-select ng-model="servercluster.travelMode" placeholder="Player Travel Mode" class="md-no-underline">
                    <md-option value="restricted">Restricted.  Players must use in-game portals to move between servers.</md-option>
            				<md-option value="free">Free.	 Players may join any server at any time, and can use in-game portals also.</md-option>
                  </md-select>
                </md-input-container>


                <md-input-container class="md-block">
                  <label>Server to game CRED transfers happen automatically when the server's balance exceeds this amount.</label>
                  <input required type="number" step="any" name="min_online" min="1000000"
                       max="10000000" ng-model="servercluster.server_to_game_transfer_threshold"  />

                  <div ng-messages="projectForm.server_to_game_transfer_threshold.$error" multiple md-auto-hide="true">
                    <div ng-message="required">
                      A number is required here.
                    </div>
                    <div ng-message="min">
                      Minimum 1000000
                    </div>
                    <div ng-message="max">
                      Maximum 10000000
                    </div>
                  </div>
                </md-input-container>


                <md-input-container class="md-block">
                  <label for="region">Server Creation Mode:</label>
                  <md-select ng-model="servercluster.serverCreationMode" placeholder="Server Creation Mode" class="md-no-underline">
                    <md-option value="fixed">Fixed number of servers.  You specifically define them.</md-option>
            				<md-option value="infinite">Infinite number of servers.	 They are defined as needed.</md-option>
                  </md-select>
                </md-input-container>

                <md-input-container class="md-block">
                  <label for="region">New Player Start Mode:</label>
                  <md-select ng-model="servercluster.newPlayerStartMode" placeholder="Server Creation Mode" class="md-no-underline">
                    <md-option value="random entry">Pick an entry server at random.</md-option>
                  </md-select>
                </md-input-container>

                <md-input-container class="md-block">
                  <label for="region">Rejoining player Start Mode:</label>
                  <md-select ng-model="servercluster.rejoiningPlayerStartMode" placeholder="Server Creation Mode" class="md-no-underline">
                    <md-option value="previous">Start players on the server they were last on. </md-option>
            				<md-option value="random entry">Start players on a random entry server.</md-option>
                  </md-select>
                </md-input-container>

                <md-input-container class="md-block" ng-show="servercluster.serverCreationMode == 'fixed'">
                  <label>How many servers are allowed</label>
                  <input required type="number" step="any" name="max_count" min="2"
                       max="16" ng-model="servercluster.max_count"  />

                  <div ng-messages="projectForm.max_count.$error" multiple md-auto-hide="true">
                    <div ng-message="required">
                      A number is required here.
                    </div>
                    <div ng-message="min">
                      Minimum 2
                    </div>
                    <div ng-message="max">
                      Maximum 16
                    </div>
                  </div>
                </md-input-container>

                <md-input-container class="md-block" ng-show="servercluster.serverCreationMode == 'infinite'">
                  <label>When a new server is created, some CRED is moved from the game wallet, into the server's wallet.  How much should be moved?</label>
                  <input required type="number" step="any" name="min_online" min="0"
                       max="10000000" ng-model="servercluster.game_to_server_initial_transfer_amount"  />

                  <div ng-messages="projectForm.game_to_server_initial_transfer_amount.$error" multiple md-auto-hide="true">
                    <div ng-message="required">
                      A number is required here.
                    </div>
                    <div ng-message="min">
                      Minimum 0
                    </div>
                    <div ng-message="max">
                      Maximum 10000000
                    </div>
                  </div>
                </md-input-container>


                <md-toolbar class="md-theme-light">
                    <h2 class="md-toolbar-tools">
                      <span>VM configuration</span>
                    </h2>
                  </md-toolbar>

                  <div>If you are still in development mode, and don't have information about the VM configuration, you can just leave this section blank</div>

                  <div layout="row">
                    <div flex>

                      <md-input-container class="md-block md-input-has-value">
                        <label for="input_vm_project">vm_project </label>
                        <input ng-model="servercluster.vm_project" class="ng-pristine ng-untouched ng-valid md-input" id="input_vm_project" aria-invalid="false"><div class="md-errors-spacer"></div>
                        <div class="hint" >Use "ue4topia" if you want to use our internal hosting.</div>
                      </md-input-container>

                    </div>
                    <div flex>

                      <md-input-container class="md-block md-input-has-value">
                        <label for="input_vm_bucket">vm_bucket </label>
                        <input ng-model="servercluster.vm_bucket" class="ng-pristine ng-untouched ng-valid md-input" id="input_vm_bucket" aria-invalid="false"><div class="md-errors-spacer"></div>
                        <div class="hint" >Use "ue4topia.appspot.com" if you want to use uetopia hosting.</div>
                      </md-input-container>

                    </div>
                  </div>
                  <div layout="row">
                    <div flex>

                      <md-input-container class="md-block">
                        <label for="region">Region</label>
                        <md-select ng-model="servercluster.vm_region" placeholder="Region" class="md-no-underline">
                          <md-option value="northamerica-northeast1">Northeast North America: Montreal, Canada</md-option>
                          <md-option value="us-west1">Western US:	 Oregon</md-option>
                          <md-option value="us-west2">Western US:  Los Angeles</md-option>

                          <md-option value="us-west3">Western US: Salt Lake City</md-option>
                          <md-option value="us-west4">Western US: Las Vegas</md-option>

                          <md-option value="us-central1">Central US:	Iowa</md-option>
                          <md-option value="us-east1">Eastern US:	South Carolina</md-option>
                          <md-option value="us-east4">Eastern US: Northern Virginia</md-option>
                          <md-option value="southamerica-east1">Eastern South America: Sao Paulo, Brazil</md-option>
                          <md-option value="europe-north1">North Europe: Hamina, Finland</md-option>
                          <md-option value="europe-west1">Western Europe:	 Belgium</md-option>
                          <md-option value="europe-west2">Western Europe:	 London U.K.</md-option>
                          <md-option value="europe-west3">Western Europe:	 Frankfurt, Germany</md-option>
                          <md-option value="europe-west4">Western Europe:	 Eemshaven, Netherlands</md-option>

                          <md-option value="europe-west6">Western Europe: Zurich</md-option>

                          <md-option value="asia-south1">South Asia:	Mumbai, India</md-option>
                          <md-option value="asia-southeast1">Southeast Asia:	Singapore</md-option>
                          <md-option value="asia-east1">East Asia:	Changhua County, Taiwan</md-option>
                          <md-option value="asia-east2">East Asia: Hong Kong</md-option>
                          <md-option value="asia-northeast1">Northeast Asia:	Tokyo</md-option>

                          <md-option value="asia-northeast2">Northeast Asia: Osaka</md-option>
                          <md-option value="asia-northeast3">Northeast Asia: Seoul</md-option>

                          <md-option value="australia-southeast1">Southeast Australia:	Sydney, Australia</md-option>
                        </md-select>
                      </md-input-container>

                    </div>
                    <div flex>

                      <md-input-container class="md-block md-input-has-value">
                        <label for="input_vm_disk_image">Disk Image</label>
                        <input ng-model="servercluster.vm_disk_image" class="ng-pristine ng-untouched ng-valid md-input" id="input_vm_disk_image" aria-invalid="false"><div class="md-errors-spacer"></div>
                      </md-input-container>

                    </div>
                    <div flex>

                      <md-input-container class="md-block">
                        <label for="input_vm_machine_type">Machine Type</label>
                        <md-select ng-model="servercluster.vm_machine_type" placeholder="Machine Type" class="md-no-underline">
                          <md-optgroup label="Shared">
                            <md-option value="f1-micro">micro (1 shared vCPU) 0.6 GB Memory</md-option>
                            <md-option value="g1-small">small (1 shared vCPU) 1.7 GB Memory</md-option>
                          </md-optgroup>
                          <md-optgroup label="Standard">
                            <md-option value="n1-standard-1">1 vCPU 3.75 GB Memory</md-option>
                            <md-option value="n1-standard-2">2 vCPU 7.5 GB Memory</md-option>
                            <md-option value="n1-standard-4">4 vCPU 15 GB Memory</md-option>
                            <md-option value="n1-standard-8">8 vCPU 30 GB Memory</md-option>
                            <md-option value="n1-standard-32">32 vCPU 120 GB Memory</md-option>
                            <md-option value="n1-standard-64">64 vCPU 240 GB Memory</md-option>
                          </md-optgroup>
                        </md-select>
                      </md-input-container>

                    </div>
                  </div>

                  <div> Startup and shutdown scripts can be overridden by individual servers, but if left blank, will default to the server cluster configuration. </div>

                  <div layout="row">
                    <div flex>

                      <md-input-container class="md-block md-input-has-value">
                        <label for="input_vm_startup_script_location">Startup Script Location</label>
                        <input ng-model="servercluster.vm_startup_script_location" class="ng-pristine ng-untouched ng-valid md-input" id="input_vm_startup_script_location" aria-invalid="false"><div class="md-errors-spacer"></div>
                      </md-input-container>

                    </div>
                    <div flex>

                      <md-input-container class="md-block md-input-has-value">
                        <label for="input_vm_shutdown_script_location">Shutdown Script Location</label>
                        <input ng-model="servercluster.vm_shutdown_script_location" class="ng-pristine ng-untouched ng-valid md-input" id="input_vm_shutdown_script_location" aria-invalid="false"><div class="md-errors-spacer"></div>
                      </md-input-container>

                    </div>
                  </div>

                  <div layout="row">
                    <md-input-container class="md-block md-input-has-value">
                    <md-checkbox ng-model="servercluster.server_manager_task" aria-label="server_manager_task">
                        Run Server Manager Task - Must be enabled for server shards to function.
                      </md-checkbox>

                  </div>

                  <div layout="row">
                    <md-input-container class="md-block md-input-has-value">
                    <md-checkbox ng-model="servercluster.accept_matchmaker_events_for_this_region" aria-label="accept_matchmaker_events_for_this_region">
                        Accept matchmaker events to this cluster's news feed when the matches occur in this cluster's region.
                      </md-checkbox>

                  </div>



                <md-divider></md-divider>

        <div>
          <md-button type="submit" ng-click="submit(form, servercluster)" >Save</md-button>
        </div>
        <div>
          <md-button type="submit" ng-click="clone(servercluster)" >Clone</md-button>
        </div>
        <div>
          <md-button type="submit" ng-click="remove(servercluster)" >Delete</md-button>
        </div>
      </form>

      </div>

</md-content>
<md-toolbar class="demo-toolbar md-primary _md _md-toolbar-transitions">
  <div class="md-toolbar-tools">
    <h3 class="ng-binding">Servers</h3>
  </div>
</md-toolbar>
  <md-content layout-padding="" class="layout-padding _md">

    <div ng-show="!loaded_game_servers" class="center"> <md-progress-circular md-mode="indeterminate"></md-progress-circular> </div>

    <div ng-show="loaded_game_servers">

      <div>Servers represent the physical machines where players connect to play this game. </div>

      <div ng-show="!servers.length">No servers to show.
        <div ng-show="servercluster.serverCreationMode == 'infinite'"> You need a server to act as a starting point for Infinite mode.</div>

      </div>

      <md-button style="margin-bottom: 20px;" type="submit" ui-sref="developerservercreate({gameKeyId:servercluster.gameKeyId, serverClusterKeyId:servercluster.key_id})">Add a new server</md-button>

        <div layout="row" layout-wrap>
        <md-card md-theme="{{ showDarkTheme ? 'dark-purple' : 'default' }}" md-theme-watch ng-repeat="server in servers">
          <md-card-title>
            <md-card-title-text>
              <span class="md-headline">{{server.title}}</span>
              <span class="md-subhead">{{server.description}}</span>
            </md-card-title-text>
            <md-card-title-media>
              <div class="md-media-sm card-media"></div>
            </md-card-title-media>
          </md-card-title>
          <md-card-actions layout="row" layout-align="end center">
            <md-button ui-sref="developerserverdetail({gameKeyId: servercluster.gameKeyId, serverClusterKeyId: servercluster.key_id, key_id: server.key_id})">Edit</md-button>

          </md-card-actions>
        </md-card>
        </div>

    </div>


    </md-content>

  </div>
